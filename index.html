<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">

  <title>Tomy & Lexa | Virtual Wedding Reception</title>
  <link rel="icon" href="images/favicon-16.png">

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tour/0.12.0/css/bootstrap-tour-standalone.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css">

  <!-- CSS Stylesheet  -->
  <link rel="stylesheet" href="css/style.css">

</head>

<body>


  <div class="mobile-content">
    <h1>Please Access This Website from Desktop</h1>
    <h2>Can't wait to see you!</h2>
  </div>

  <div class="desktop-content">
    <!-- MODALS -->
    <!-- WELCOMING MODAL -->
    <div id="welcomeModal" class="modal">

      <div class="modal-content content-welcome">
        <h4 class="lang" key="welcome">Selamat Datang</h4>
        <h5 id="welcomeName"></h5>
        <p class="lang lang-head" key="language">Pilih Bahasa</p>

        <div id="checkbox-container" class="lang-wrapper">
          <div class="mx-auto">
            <label class="option_item">
              <input type="checkbox" id="checkbox-ind" class="checkbox">
              <div class="option_inner">
                <div class="icon"><img src="images/lang/indonesia.png" class="flag" alt="indonesia"></div>
              </div>
            </label>
            <label class="option_item">
              <input type="checkbox" id="checkbox-eng" class="checkbox">
              <div class="option_inner">
                <div class="icon"><img src="images/lang/united-kingdom.png" class="flag" alt="indonesia"></div>
              </div>
            </label>
          </div>
        </div>
      </div>

    </div>

    <!-- WELCOMING MODAL - EARLY BIRD -->
    <div id="earlyBird" class="modal">

      <div class="modal-content content-earlyBird">
        <h4 class="lang" key="earlyBird_1">Video Call Access</h4>
        <h6 class="lang" key="earlyBird_2">We will give you the video call access in</h6>
        <div class="timer">
          <span id="hours"></span>
          <span id="minutes"></span>
          <span id="seconds"></span>
        </div>
        <h6 class="lang" key="earlyBird_3">The video call access will show up automatically when the countdown is done.</h6>
        <p>(screenshot popupnya nanti)</p>
        <h6 class="lang" key="earlyBird_4">While waiting, let us show you around the "Reception Venue"</h6>
        <button type="button" class="btn-modal" id="btn-next" name="next">Next</button>
      </div>

    </div>

    <!-- Video Call Modal -->
    <div id="vcallModal" class="modal">

      <div class="modal-content content-vcall">
        <h4><span id="redirectVcall"></span></h4>
        <h4 class="lang" key="vcall_1"> detik lagi Anda akan menuju halaman video call</h4>
        <h6 class="lang" key="vcall_2">You will be seated in the waiting room, you can explore the website after the video call</h6>
        <!-- <a href="Vcall/index.html"><button type="button" class="btn-modal" id="btn-okay" name="okay">Okay</button></a> -->
      </div>

    </div>

    <!-- Jam Karet Modal -->
    <div id="karetModal" class="modal">

      <div class="modal-content content-karet">
        <h6 class="lang" key="sorry">Whoops you’re late, we’re sorry you’re not able to meet Tomy & Lexa. Here some message from them..</h6>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/1Sj-UdjqlFw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        <button type="button" class="btn-modal" id="btn-next-2" name="okay">Next</button>
      </div>

    </div>

    <!-- FAQ Modal -->
    <div id="faqModal" class="modal">
      <div class="modal-content content-faq">
        <span class="close">&times;</span>
        <h4 class="lang" key="">Frequently Asked Questions</h4>
      </div>
    </div>

    <!-- Angpao Modal -->
    <div id="angpaoModal" class="modal">

      <!-- Angpao Modal Content -->
      <div class="modal-content modal-angpao">
        <span class="close">&times;</span>
        <h5 class="lang" key="gift">Kirim hadiah dengan mudah :) wkwk</h5>
        <div class="qrcode-list">
          <div class="qrcode ovo">
            <p>Via OVO</p>
            <img src="images/angpao/ovo.png" alt="ovo">
          </div>
          <div class="qrcode">
            <p class="lang" key="bank">Via Transfer Bank</p>
            <img class="bca" src="images/angpao/bca.png" alt="ovo">
            <p><span class="lang" key="norek">No rekening </span>123456789</p>
            <p>Tomy Herseta</p>
          </div>
          <div class="qrcode gopay">
            <p>Via Gopay</p>
            <img src="images/angpao/gopay.png" alt="ovo">
          </div>
        </div>
      </div>

    </div>

    <!-- WEB CONTENT -->
    <div class="container-fluid homepage">

      <!-- Header -->
      <div class="header">

        <div id="checkbox-container2" class="header-div">
          <input type="checkbox" class="checkbox" id="toggleLang" />
          <label class="label" for="toggleLang">
            <img class="flag-circle uk" src="images/lang/uk-circle.png" alt="">
            <img class="flag-circle ind" src="images/lang/ind-circle.png" alt="">
            <div class="ball"></div>
          </label>

          <img id="info" class="header-icon info" src="images/information.svg" alt="">

          <img id="faq" class="header-icon" src="images/faq.svg" alt="">
        </div>

      </div>


      <div class="layer planet" data-depth="0.5">
        <div id="idPlanet" class="">
          <a href="aisle/index.html"><img src="images/planet.png" alt=""></a>
        </div>
      </div>


      <div id="live-mc" class="live-mc"></div>

      <div class="video-mc embed-responsive">
        <iframe class="" src="https://www.youtube.com/embed/6ksnNqA302I?autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>


      <div id="angpao" class="angpao">
        <img src="images/png-seq/staticayam.png" alt="">
      </div>

      <a href="souvenir/index.html">
        <div id="souvenir" class="souvenir"></div>
      </a>

      <a href="gallery/index.html">
        <div class="gallery" id="gallery">
          <div class="gal gallery1"></div>
          <div class="gal gallery2"></div>
          <div class="gal gallery3"></div>
          <div class="gal gallery4"></div>
          <div class="gal gallery5"></div>
          <div class="gal gallery6"></div>
        </div>
      </a>

    </div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script src="  https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tour/0.12.0/js/bootstrap-tour-standalone.min.js" charset="utf-8"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" charset="utf-8"></script>

  <!-- js -->
  <script type="text/javascript" src="index.js"></script>
  <!-- <script type="text/javascript" src="gotoconcall.js"></script> -->

  <script type="text/javascript">

    // WEB TOUR
    var tour = new Tour({
      steps: [{
          element: "#gallery",
          title: "Gallery Foto & Video",
          content: "Kamu bisa melihat foto dan video Pre-Wed, Lamaran, serta Akad Pernikahan dari Tomy & Lexa ",
          placement: "right",
        },
        {
          element: "#idPlanet",
          title: "Pelaminan",
          content: "Di sini kamu bisa melihat siapa yang sedang bertemu dengan mempelai dan siapa yang ada di antrian berikutnya",
          placement: "top",
        },
        {
          element: "#angpao",
          title: "Donasi",
          content: "Kamu bisa memberikan rasa sayangmu untuk masa depan Tomy & Lexa di sini",
          placement: "right",
        },
        {
          element: "#souvenir",
          title: "Cinderamata",
          content: "Sebagai tanda terima kasih dari Tomy & Lexa, ada cinderamata untukmu di sini",
          placement: "top",
        },
        {
          element: "#live-mc",
          content: "MC (nama) akan menemanimu selama acara berlangsung",
          placement: "top",
        },
        {
          element: "#info",
          title: "Instructions",
          content: "Jika kamu ingin membaca ulang petunjuk sebelumnya, silakan klik tombol ini",
          placement: "left",
        }
      ],
      container: 'body',
      backdrop: true,
      smartPlacement: true,
      keyboard: true,
      storage: window.localStorage,
      debug: false,
      autoscroll: false,
      backdropPadding: 0,
      redirect: true,
      template: '<div class="popover tour" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-prev" data-role="prev">Prev</button> <button class="btn btn-sm btn-next" data-role="next">Next</button> <button class="btn btn-sm btn-secondary" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause</button> </div> <button class="btn btn-sm end" data-role="end">End tour</button> </div> </div>',
    });

    var tourEng = new Tour({
      steps: [{
          element: "#gallery",
          title: "Video & Photo Gallery",
          content: "Take a look of Lexa & Tomy’s Pre-Wedding, Engagement and Wedding Ceremony photos and videos here",
          placement: "right",
        },
        {
          element: "#idPlanet",
          title: "The Aisle",
          content: "Take a peak of who are currently meeting the bride & groom. You can also see who’s up in the line to meet them soon!",
          placement: "top",
        },
        {
          element: "#angpao",
          title: "Show your support here",
          content: "We have provided ways on how you can support Tomy & Lexa’s in their next season.",
          placement: "right",
        },
        {
          element: "#souvenir",
          title: "Wedding Souvenir",
          content: "As a thank you, Tomy & Lexa have a special little something for you to remember this precious moment with them",
          placement: "top",
        },
        {
          element: "#live-mc",
          content: "MC (name) will accompany the guests during the event but we’re sorry he/she will only use Bahasa",
          placement: "top",
        },
        {
          element: "#info",
          title: "Instructions",
          content: "You can click this icon if you want to repeat the instructions",
          placement: "left",
        }
      ],
      container: 'body',
      backdrop: true,
      smartPlacement: true,
      keyboard: true,
      storage: window.localStorage,
      debug: false,
      autoscroll: false,
      backdropPadding: 0,
      redirect: true,
      template: '<div class="popover tour" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-prev" data-role="prev">Prev</button> <button class="btn btn-sm btn-next" data-role="next">Next</button> <button class="btn btn-sm btn-secondary" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause</button> </div> <button class="btn btn-sm end" data-role="end">End tour</button> </div> </div>',
    });

    $("#info").click(function() {
      if (toggleLang.checked) {
        tourEng.restart();
      } else {
        tour.restart();
      }
    });

    var dirPath = dirname(location.href);
    function dirname(path) {
      return path.replace(/\\/g, '/').replace(/\/[^\/]*$/, '');
    }

    // TOKEN DATA
    var name = null;
    var idAdmin = null;

    cookieToken = $.cookie("token");
    console.log("token " + cookieToken);

    if (cookieToken == null){
      var fullPath = dirPath + "/login";
      console.log(fullPath);
      window.location = fullPath;
    }

    $.ajax({
      url: "https://webnikahapi.arthatronic.com/api/user/",
      async: false,
      type: "GET",
      global: false,
      // Fetch the stored token from localStorage and set in the header
      headers: {
        "Authorization": "Token " + cookieToken
      },
      success: function(result) {
        console.log(result);
        name = result[0].name;
        timeSet = result[0].time;
        idAdmin = result[0].id_room;
        console.log(name);
        console.log(timeSet);

      },
      error: function(err) {
        console.log(err);
      }
    });

    // console.log("nama homepage " + name);
    $("#welcomeName").html(name);

    console.log("id salah" + idAdmin);

    if (idAdmin == "9999" || idAdmin == "9898" || idAdmin == "8888") {
      var fullPath = dirPath + "/Vcall";
      console.log(fullPath);
      window.location = fullPath;
    }



    // cek manual
    // var now = new Date();
    // var timeNow = now.getHours() + ":" + now.getMinutes() + ":" + now.getSeconds();
    // var endTime = new Date("5 August 2020 " + now.getHours().toString() + ":" + now.getMinutes().toString() + ":" + parseInt(now.getSeconds()).toString() + " GMT+07:00");


    var endTime = new Date("7 August 2020 " + timeSet + " GMT+07:00");

    console.log("endtimeeeee" + endTime);
    // endTime = (Date.parse(endTime) / 1000) + 10;

    endTime = (Date.parse(endTime) / 1000);

    var welcomeState = localStorage.getItem("welcomeState");

    function makeTimer() {

      // var endTime = new Date("5 August 2020 " + timeSet + " GMT+07:00");

      // manual
      now = new Date();
      timeNow = now.getHours() + ":" + now.getMinutes() + ":" + now.getSeconds();

      // var endTime = new Date("6 August 2020 17:38:05 GMT+07:00");

      timeNow = (Date.parse(now) / 1000);

      var timeLeft = endTime - timeNow;
      console.log("timeleft " + timeLeft);
      var days = Math.floor(timeLeft / 86400);
      var hours = Math.floor((timeLeft - (days * 86400)) / 3600);
      var minutes = Math.floor((timeLeft - (days * 86400) - (hours * 3600)) / 60);
      var seconds = Math.floor((timeLeft - (days * 86400) - (hours * 3600) - (minutes * 60)));

      if (hours < "10") {
        hours = "0" + hours;
      }
      if (minutes < "10") {
        minutes = "0" + minutes;
      }
      if (seconds < "10") {
        seconds = "0" + seconds;
      }

      $("#hours").html(hours + "<span> :</span>");
      $("#minutes").html(minutes + "<span> :</span>");
      $("#seconds").html(seconds);

      console.log(hours + ":" + minutes + ":" + seconds);

      // Popup Vcall
      // if (hours == "00" && minutes == "00" && seconds == "00")
      if (timeLeft <= 0 && timeLeft >= -600) {
        $("#welcomeModal").css('display', 'none');
        $("#earlyBird").css('display', 'none');
        $("#vcallModal").css('display', 'block');

        console.log("nol");

        tour.end();
        tourEng.end();

        var counterVcall = 5;
        var interval = setInterval(function() {
          // Display 'counter' wherever you want to display it.
          $("#redirectVcall").html(counterVcall);
          counterVcall--;


          console.log(counterVcall);
          if (counterVcall == 0) {
            // Display a login box
            clearInterval(interval);
            $("#vcallModal").css('display', 'block');
            console.log(dirPath);
            var fullPath = dirPath + "/Vcall";
            console.log(fullPath);
            window.location = fullPath;
            // return false;
          }
        }, 1000);
      }

      if (timeLeft > 0) {
        // Select language @ modal
        $("#checkbox-ind").click(function() {
          $("#toggleLang").prop('checked', false);

          // close modal, pop user modal
          $("#welcomeModal").delay(1000).queue(function(next) {
            $("#welcomeModal").css("display", "none");
            $("#earlyBird").css("display", "block");
          });
        });

        $("#checkbox-eng").click(function() {
          $("#toggleLang").prop('checked', true);

          $("#welcomeModal").delay(1000).queue(function(next) {
            $("#welcomeModal").css("display", "none");
            $("#earlyBird").css("display", "block");
          });
        });
      }

      // Jam Karet
      if (timeLeft < -600){
        $("#checkbox-ind").click(function(){
          $("#earlyBird").css('display', 'none');
          $("#karetModal").css('display', 'block');

        });
        $("#checkbox-eng").click(function(){
          $("#earlyBird").css('display', 'none');
          $("#karetModal").css('display', 'block');

        });

      }
    }

    setInterval(function() {
      makeTimer();
    }, 1000);
  </script>

</body>

</html>
